<html layout:decorate="~{layout}">
<div layout:fragment="content" style="width:100%;">



    <!-- 캐러셀 -->
    <div id="carouselExampleAutoplaying" class="carousel slide" data-bs-ride="carousel" style="width:100%;">
        <div class="carousel-inner" style="width:100%; height:800px;">
            <div class="carousel-item active" style="text-align:center;">
                <img src="https://www.designersdistribution.com/media/53/99/ed/1698754495/Designer-distribution-fashion-2.jpg"
                     alt="main-photo-1" style="width:100%; height:800px; object-fit:cover;">
            </div>
            <div class="carousel-item" style="text-align:center;"
                 th:each="mainImg : ${@request.getMainImages()}">
                <img th:src="${mainImg.FilePath}" alt="main-photo-2"
                     style="width:100%; height:800px; object-fit:cover;">
            </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleAutoplaying"
                data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleAutoplaying"
                data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
        </button>
    </div>
    <!-- 캐러셀 끝 -->

    <div style="height:600px; display:flex; justify-content:center; margin-bottom:50px; margin-top:50px;">
        <div style="width:1200px;">
            <div style="font-size:24px; font-weight:bold;">Best Seller</div>
            <span style="text-decoration:none; font-size:12px; color:gray;">판매량이 높은 상품 TOP 10</span>
            <hr>
            <div class="wrap"> <!-- 배너표시영역 -->
                <div class="rolling-list"> <!-- 원본배너 -->
                    <ul>
                        <li th:each="best : ${@request. getBestSellerList()}">
                            <div class="image-wrap" style="width:300px; text-align:center; margin-left:20px; margin-right:20px; position:relative;">
                                <img th:src="${best.representImg.FilePath}" alt="productThumnail" style="width:280px; height:280px; object-fit:cover;">
                                <span class="position-absolute top-50 start-100 translate-middle badge rounded-pill bg-danger"
                                      th:if="${best.discount != '0'}"
                                      th:text="|-${best.discount}%|" style="font-size:24px;">
                            <span class="visually-hidden">unread messages</span>
                        </span>
                                <a th:href="@{|/product/detail/${best.id}|}" th:text="${best.name}" style="font-weight:bold; font-size:20px;"></a>
                                <div>
                                    <tr th:if="${best.discount == '0'}">
                                        <th scope="row" style="width:100px;">가격</th>
                                        <td th:text="|${best.price}원|" style=""></td>
                                    </tr>
                                    <tr th:if="${best.discount != '0'}">
                                        <th scope="row" style="width:100px;">할인</th>
                                        <td>
                                            <del th:text="|${best.price}원|"></del>
                                            <span th:text="${#numbers.formatInteger(best.DCPrice, 3, 'COMMA') + '원'}" style="color:red; font-weight:bold;"></span>
                                        </td>
                                    </tr>
                                </div>
                                <div th:text="${best.category.name}"></div>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <div style="height:600px; display:flex; justify-content:center; margin-bottom:50px; margin-top:50px;">
        <div style="width:1200px;">
            <div style="font-size:24px; font-weight:bold;">New Items</div>
            <span style="text-decoration:none; font-size:12px; color:gray;">새로 등록된 상품 TOP 10</span>
            <hr>
            <div style="display:flex; height:400px; overflow:scroll">
                <div th:each="newList : ${@request.getNewProductList()}" style="width:300px; text-align:center; margin-left:20px; margin-right:20px; position:relative;">
                    <img th:src="${newList.representImg.FilePath}" alt="productThumnail" style="width:280px; height:280px; object-fit:cover;">
                    <span class="position-absolute top-50 start-100 translate-middle badge rounded-pill bg-danger"
                          th:if="${newList.discount != '0'}"
                          th:text="|-${newList.discount}%|" style="font-size:24px;">
                            <span class="visually-hidden">unread messages</span>
                        </span>
                    <a th:href="@{|/product/detail/${newList.id}|}" th:text="${newList.name}" style="font-weight:bold; font-size:20px;"></a>
                    <div>
                        <tr th:if="${newList.discount == '0'}">
                            <th scope="row" style="width:100px;">가격</th>
                            <td th:text="|${newList.price}원|" style=""></td>
                        </tr>
                        <tr th:if="${newList.discount != '0'}">
                            <th scope="row" style="width:100px;">할인</th>
                            <td>
                                <del th:text="|${newList.price}원|"></del>
                                <span th:text="${#numbers.formatInteger(newList.DCPrice, 3, 'COMMA') + '원'}" style="color:red; font-weight:bold;"></span>
                            </td>
                        </tr>
                    </div>
                    <div th:text="${newList.category.name}"></div>
                </div>
            </div>
        </div>
    </div>

    <div style="height:600px; display:flex; justify-content:center; margin-bottom:50px; margin-top:50px;">
        <div style="width:1200px;">
            <div style="font-size:24px; font-weight:bold;">High Quality</div>
            <span style="text-decoration:none; font-size:12px; color:gray;">평점이 높은 상품 TOP 10</span>
            <hr>
            <div style="display:flex; height:400px; overflow:scroll">
                <div th:each="highScore : ${@request.getHighQualityProducts()}" style="width:300px; text-align:center; margin-left:20px; margin-right:20px; position:relative;">
                    <img th:src="${highScore.representImg.FilePath}" alt="productThumnail" style="width:280px; height:280px; object-fit:cover;">
                    <span class="position-absolute top-50 start-100 translate-middle badge rounded-pill bg-danger"
                          th:if="${highScore.discount != '0'}"
                          th:text="|-${highScore.discount}%|" style="font-size:24px;">
                            <span class="visually-hidden">unread messages</span>
                        </span>
                    <a th:href="@{|/product/detail/${highScore.id}|}" th:text="${highScore.name}" style="font-weight:bold; font-size:20px;"></a>
                    <div>
                        <tr th:if="${highScore.discount == '0'}">
                            <th scope="row" style="width:100px;">가격</th>
                            <td th:text="|${highScore.price}원|" style=""></td>
                        </tr>
                        <tr th:if="${highScore.discount != '0'}">
                            <th scope="row" style="width:100px;">할인</th>
                            <td>
                                <del th:text="|${highScore.price}원|"></del>
                                <span th:text="${#numbers.formatInteger(highScore.DCPrice, 3, 'COMMA') + '원'}" style="color:red; font-weight:bold;"></span>
                            </td>
                        </tr>
                    </div>
                    <div th:text="${highScore.category.name}"></div>
                </div>
            </div>
        </div>
    </div>




</div>
</html>

<style>
    .wrap {
display: flex;
overflow: hidden;
}
.wrap .rolling-list ul {
display: flex;
}
.wrap .rolling-list ul li {
box-sizing: border-box;
border-radius: 20px;
margin: 0 16px;
display: flex;
align-items: center;
flex-shrink: 0;
}

.wrap .rolling-list ul li .image-wrap {
flex-shrink: 0;
}
.wrap .rolling-list ul li .image-wrap > img {
width: 100%;
}
.wrap .rolling-list ul li .desc {
font-family: 'BMJUA';
}
.wrap .rolling-list ul li .desc strong {
display: block;
font-size: 24px;
margin-bottom: 24px;
}
.wrap .rolling-list ul li .desc span {
font-size: 18px;
line-height: 1.2;
}
.rolling-list.original {
animation: rollingleft1 66s linear infinite;
}
.rolling-list.clone {
animation: rollingleft2 66s linear infinite;
}

@keyframes rollingleft1 {
0% { transform: translateX(0); }
50% { transform: translateX(-100%); }
50.01% { transform: translateX(100%); }
100% { transform: translateX(0); }
}

@keyframes rollingleft2 {
0% { transition: translateX(0); }
100% { transform: translateX(-200%); }
}
</style>

<script>
    // 롤링 배너 복제본 생성
let roller = document.querySelector('.rolling-list');
roller.id = 'roller1'; // 아이디 부여

let clone = roller.cloneNode(true)
// cloneNode : 노드 복제. 기본값은 false. 자식 노드까지 복제를 원하면 true 사용
clone.id = 'roller2';
document.querySelector('.wrap').appendChild(clone); // wrap 하위 자식으로 부착

document.querySelector('#roller1').style.left = '0px';
document.querySelector('#roller2').style.left = document.querySelector('.rolling-list ul').offsetWidth + 'px';
// offsetWidth : 요소의 크기 확인(margin을 제외한 padding값, border값까지 계산한 값)

roller.classList.add('original');
clone.classList.add('clone');
</script>